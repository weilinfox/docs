"use strict";(self.webpackChunkruyisdk=self.webpackChunkruyisdk||[]).push([[8892],{2815:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var i=e(4848),r=e(8453);const s={sidebar_position:7},c="\u6784\u5efa milkv-duo-examples \u793a\u4f8b\u7a0b\u5e8f",o={id:"Package-Manager/cases/case7",title:"\u6784\u5efa milkv-duo-examples \u793a\u4f8b\u7a0b\u5e8f",description:"\u9996\u5148\u5b89\u88c5\u5fc5\u8981\u7684\u4f9d\u8d56\uff1a",source:"@site/docs/Package-Manager/cases/case7.md",sourceDirName:"Package-Manager/cases",slug:"/Package-Manager/cases/case7",permalink:"/docs/en/docs/Package-Manager/cases/case7",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Using QEMU and LLVM",permalink:"/docs/en/docs/Package-Manager/cases/case6"},next:{title:"More Information",permalink:"/docs/en/docs/Package-Manager/misc"}},a={},l=[];function d(n){const t={code:"code",h1:"h1",p:"p",pre:"pre",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"\u6784\u5efa-milkv-duo-examples-\u793a\u4f8b\u7a0b\u5e8f",children:"\u6784\u5efa milkv-duo-examples \u793a\u4f8b\u7a0b\u5e8f"}),"\n",(0,i.jsx)(t.p,{children:"\u9996\u5148\u5b89\u88c5\u5fc5\u8981\u7684\u4f9d\u8d56\uff1a"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"$ ruyi install gnu-milkv-milkv-duo-musl-bin\n"})}),"\n",(0,i.jsx)(t.p,{children:"\u89e3\u5305\u51fa milkv-duo-examples \u5e76\u7f16\u8bd1\uff1a"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"$ mkdir test-duo-examples\n$ cd test-duo-examples\n$ ruyi extract milkv-duo-examples\n"})}),"\n",(0,i.jsx)(t.p,{children:"\u4fee\u6539 envsetup.sh \u7684\u5185\u5bb9\uff1a"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'#!/bin/bash\n\nscript_dir=$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")" &> /dev/null && pwd)\necho "script_dir: ${script_dir}"\n\nmilkv_debug=0\n\nmilkv_chip=\nmilkv_arch=\n\nhost_tools_git="https://github.com/milkv-duo/host-tools.git"\nhost_tools=${script_dir}/host-tools\n\nfunction print_info()    { printf "\\e[1;92m%s\\e[0m\\n" "$1"; }\nfunction print_warning() { printf "\\e[1;93m%s\\e[0m\\n" "$1"; }\nfunction print_note()    { printf "\\e[1;94m%s\\e[0m\\n" "$1"; }\nfunction print_err()     { printf "\\e[1;31mError: %s\\e[0m\\n" "$1"; }\n\nfunction choose_target() {\n\techo "Select Product:"\n\tprint_info "1. Duo (CV1800B)"\n\tprint_info "2. Duo256M (SG2002) or DuoS (SG2000)"\n\tread -p "Which would you like: " chip_index\n\n\tif [ "${chip_index}" -eq 1 ]; then\n\t\tmilkv_chip="CV180X"\n\t\tmilkv_arch="riscv64"\n\telif [ "${chip_index}" -eq 2 ]; then\n\t\tmilkv_chip="CV181X"\n\n\t\techo "Select Arch:"\n\t\tprint_info "1. ARM64"\n\t\tprint_info "2. RISCV64"\n\t\tread -p "Which would you like: " arch_index\n\n\t\tif [ "${arch_index}" -eq 1 ]; then\n\t\t\tmilkv_arch="arm64"\n\t\telif [ "${arch_index}" -eq 2 ]; then\n\t\t\tmilkv_arch="riscv64"\n\t\telse\n\t\t\tprint_err "Nothing selected for Arch."\n\t\t\treturn 1\n\t\tfi\n\telse\n\t\tprint_err "Nothing selected for Chip."\n\t\treturn 1\n\tfi\n\n\tprint_note "CHIP: ${milkv_chip}"\n\tprint_note "ARCH: ${milkv_arch}"\n}\n\nfunction check_host_tools() {\n\tif [ ! -d ${host_tools} ]; then\n\t\tprint_warning "host-tools does not exist, download it now..."\n\t\tgit clone ${host_tools_git}\n\t\tif [ $? -ne 0 ]; then\n\t\t\tprint_err "Get the host-tools failed!"\n\t\t\treturn 1\n\t\tfi\n\telse\n\t\tif [ ! -d ${host_tools}/.git ]; then\n\t\t\tprint_warning "host-tools is not the latest one!"\n\t\t\tprint_warning "Please manually delete it first. [ ${host_tools}]"\n\t\t\tprint_warning "Then source the script again."\n\t\t\treturn 2\n\t\tfi\n\tfi\n}\n\nchoose_target\n[[ "${?}" -eq 0 ]] || return 1\n\npushd ${script_dir}\ncheck_host_tools\n[[ "${?}" -eq 0 ]] || {\n\tpopd\n\treturn 1\n}\npopd\n\nsys_inc="${script_dir}/include/system"\n\nif [[ "${milkv_arch}" == "riscv64" ]]; then\n\n\tarch_cflags="-mcpu=c906fdv -march=rv64imafdcv0p7xthead -mcmodel=medany -mabi=lp64d"\n\tarch_ldflags="-D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64"\n\n\ttoolchain_dir=${host_tools}/gcc/riscv64-linux-musl-x86_64\n\texport TOOLCHAIN_PREFIX=${toolchain_dir}/bin/riscv64-unknown-linux-musl-\n\nelif [[ "${milkv_arch}" == "arm64" ]]; then\n\n\tarch_cflags="-march=armv8-a"\n\tarch_ldflags=""\n\n\ttoolchain_dir="${host_tools}/gcc/gcc-linaro-7.3.1-2018.05-x86_64_aarch64-linux-gnu"\n\texport TOOLCHAIN_PREFIX=${toolchain_dir}/bin/aarch64-linux-gnu-\nelse\n\tprint_err "Invalid ARCH parameter!"\n\treturn 1\nfi\n\nif [[ "${milkv_chip}" == "CV180X" ]]; then\n\tsys_lib="${script_dir}/libs/system/musl_riscv64"\nelif [[ "${milkv_chip}" == "CV181X" ]]; then\n\tif [[ "${milkv_arch}" == "riscv64" ]]; then\n\t\tsys_lib="${script_dir}/libs/system/musl_riscv64"\n\telif [[ "${milkv_arch}" == "arm64" ]]; then\n\t\tsys_lib="${script_dir}/libs/system/glibc_arm64"\n\tfi\nelse\n\tprint_err "Invalid CHIP parameter!"\n\treturn 1\nfi\n\nif [ "${milkv_debug}" -eq 1 ]; then\n\tdebug_cflags="-g -O0"\nelse\n\tdebug_cflags="-O3 -DNDEBUG"\nfi\n\nexport CC="${TOOLCHAIN_PREFIX}gcc"\nexport CFLAGS="${arch_cflags} ${debug_cflags} -I${sys_inc}"\nexport LDFLAGS="${arch_ldflags} -L${sys_lib}"\n\nexport CHIP="${milkv_chip}"\n\nprint_info "Environment is ready."\n'})}),"\n",(0,i.jsx)(t.p,{children:"\u542f\u52a8\u865a\u62df\u73af\u5883\uff1a"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"$ source envsetup.sh\n"})}),"\n",(0,i.jsx)(t.p,{children:"\u5e94\u5f53\u53ef\u4ee5\u6b63\u5e38\u6784\u5efa\uff1a"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"$ cd i2c/ssd1306_i2c\n$ make\n"})})]})}function h(n={}){const{wrapper:t}={...(0,r.R)(),...n.components};return t?(0,i.jsx)(t,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,t,e)=>{e.d(t,{R:()=>c,x:()=>o});var i=e(6540);const r={},s=i.createContext(r);function c(n){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function o(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),i.createElement(s.Provider,{value:t},n.children)}}}]);